name: CI/CD Desktop App

on:
  push:
    tags:
      - 'v[0-9]+.[0-9]+.[0-9]+'

env:
  GH_TOKEN: ${{ secrets.GH_TOKEN }}
  S3_BUCKET: s3://noovolari-leapp-website-distribution-test

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name: Build Desktop App
        run: |
          cd desktop-app
#          npm install
#          npm run release-linux
#          rm -Rf ./release/linux-unpacked
#          rm -Rf ./release/.cache
#          rm -Rf ./release/builder-debug.yml
#          rm -Rf ./release/builder-effective-config.yaml
#          cp -r ./release/ ./temp/
          NEW_PACKAGE_VERSION=$(node -p -e "require('./package.json').version")
          TAG_VERSION=${GITHUB_REF#refs/*/}
          echo $NEW_PACKAGE_VERSION
          echo $TAG_VERSION
          echo ${{ env.S3_BUCKET }}


      - name: Move to Temp
        run: |
          cd desktop-app/temp
          ls
